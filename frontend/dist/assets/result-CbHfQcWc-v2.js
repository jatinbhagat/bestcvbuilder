import"./supabase-DQ_B3N6C-v2.js";import"./atsAnalysis-CFcDtclU-v2.js";const I=document.getElementById("atsScore"),k=document.getElementById("scoreCircle"),z=document.getElementById("markedAsDone"),C=document.getElementById("topFixesList"),L=document.getElementById("completedList"),b=document.getElementById("issuesList"),w=document.getElementById("strengthsList"),N=document.getElementById("strengthsSection"),S=document.getElementById("upgradeBtn");let f=null,y=[];function O(){try{const e=sessionStorage.getItem("atsAnalysis");if(!e){console.error("No analysis data found in session storage"),window.location.href="./index.html";return}f=JSON.parse(e),console.log("Analysis data loaded:",f),R(f),j(f),Oe(f),Be(f),Ze()}catch(e){console.error("Error initializing results page:",e),setTimeout(()=>{window.location.href="./index.html"},3e3)}}function R(e){if(!I)return;const s=M(e).reduce((a,o)=>a+o.score,0),n=Math.round(s/210*100);let i=n;console.log(`Calculated overall score from 21 categories: ${n} (sum: ${s}/210)`),console.log(`Using ATS score: ${i}`),I.textContent=Math.round(i),k&&(i>=80?k.style.borderColor="#10b981":i>=60?k.style.borderColor="#f59e0b":k.style.borderColor="#ef4444")}function j(e){if(!C||!L)return;const t=M(e);C.innerHTML="",L.innerHTML="";const s=t.filter(i=>i.score<9),n=t.filter(i=>i.score>=9);s.forEach(i=>{const a=document.createElement("div");a.className="sidebar-item",a.innerHTML=`
            <span class="text-sm text-gray-700">${i.name}</span>
            <span class="text-sm font-bold text-red-600">${i.score}/10</span>
        `,C.appendChild(a),y.push({title:i.name,description:i.issue,score:i.score,category:"Top Fixes",severity:i.score<6?"high":"medium",impact:i.impact})}),n.forEach(i=>{const a=document.createElement("div");a.className="sidebar-item",a.innerHTML=`
            <span class="text-sm text-gray-700">${i.name}</span>
            <span class="text-sm font-bold text-green-600">${i.score}/10</span>
        `,L.appendChild(a)}),z&&(z.textContent=`${n.length} MARKED AS DONE`)}function M(e){console.log("Generating scores with real data:",e);const t=e.component_scores||{},s=e.detailed_analysis||{},n=e.content||e.text||"";console.log("Backend component scores:",t),console.log("Backend detailed analysis:",s);const i=[],a=s.contact||{};i.push({name:"Contact Details",score:_(n),issue:W(a),impact:"SECTIONS"}),s.structure,t.structure,i.push({name:"Education Section",score:G(n),issue:"Optimize education section format and content",impact:"SECTIONS"}),i.push({name:"Skills Section",score:U(n),issue:"Improve skills presentation and relevance",impact:"SECTIONS"}),s.keywords;const o=t.keywords||0;i.push({name:"Job Fit",score:Math.round(o/20*10),issue:"Better align experience with target role requirements",impact:"ALL"}),i.push({name:"Analytical",score:ne(n),issue:"Highlight analytical and problem-solving skills",impact:"ALL"}),i.push({name:"Leadership",score:se(n),issue:"Emphasize leadership experiences and impact",impact:"ALL"}),s.formatting,t.formatting,i.push({name:"Page Density",score:Me(n),issue:"Optimize page layout and white space usage",impact:"STYLE"}),i.push({name:"Use of Bullets",score:ie(n),issue:"Improve bullet point structure and formatting",impact:"STYLE"}),i.push({name:"Spelling & Consistency",score:ae(n),issue:"Fix spelling errors and maintain consistency",impact:"BREVITY"}),i.push({name:"Grammar",score:re(n),issue:"Correct grammatical errors throughout resume",impact:"BREVITY"}),i.push({name:"Verb Tenses",score:le(n),issue:"Use consistent and appropriate verb tenses",impact:"BREVITY"}),s.achievements,t.achievements,i.push({name:"Quantity Impact",score:Ie(n),issue:"Add more quantified achievements with specific numbers",impact:"IMPACT"}),i.push({name:"Weak Verbs",score:de(n),issue:"Replace weak verbs with stronger action words",impact:"IMPACT"}),i.push({name:"Active Voice",score:pe(n),issue:"Convert passive voice to active voice for impact",impact:"IMPACT"}),i.push({name:"Summary",score:fe(n),issue:"Professional summary needs improvement for better impact",impact:"IMPACT"}),i.push({name:"Teamwork",score:Se(n),issue:"Better showcase collaborative experiences",impact:"ALL"}),s.readability;const r=t.readability||0;return i.push({name:"Verbosity",score:Math.round(r/10*10),issue:"Reduce wordiness for better readability",impact:"BREVITY"}),i.push({name:"Repetition",score:Ce(n),issue:"Eliminate repetitive phrases and content",impact:"BREVITY"}),i.push({name:"Unnecessary Sections",score:Le(n),issue:"Remove sections that don't add value",impact:"SECTIONS"}),i.push({name:"Growth Signals",score:Ae(n),issue:"Demonstrate career progression and learning",impact:"ALL"}),i.push({name:"Drive",score:$e(n),issue:"Show initiative and self-motivation examples",impact:"ALL"}),console.log("Generated categories with real scores:",i),i}function _(e){let t=10;return q(e)||(t-=2.5),F(e)||(t-=2.5),D(e)||(t-=2.5),H(e)||(t-=2.5),Math.max(t,0)}function q(e){return[/\b\d{3}[-.\s]?\d{3}[-.\s]?\d{4}\b/g,/\b\(\d{3}\)\s?\d{3}[-.\s]?\d{4}\b/g,/\b\+\d{1,3}[-.\s]?\d{1,14}[-.\s]?\d{1,14}\b/g,/\b\+91[-.\s]?\d{10}\b/g,/\b91[-.\s]?\d{10}\b/g,/\b[6-9]\d{9}\b/g,/\b\d{10,15}\b/g,/\bphone\s*:?\s*[+]?\d/gi,/\bmobile\s*:?\s*[+]?\d/gi,/\bcell\s*:?\s*[+]?\d/gi,/\bcontact\s*:?\s*[+]?\d/gi].some(s=>s.test(e))}function F(e){return/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g.test(e)}function D(e){e.toLowerCase();const t=[/linkedin\.com\/in\/[a-z0-9-]+/gi,/linkedin\.com\/pub\/[a-z0-9-]+/gi,/www\.linkedin\.com/gi,/linkedin:\s*[a-z0-9.-]+/gi,/\blinkedin\b.*profile/gi,/profile/gi];return/\blinkedin\b/gi.test(e)?!0:t.some(s=>s.test(e))}function H(e){const t=e.toLowerCase(),s=["mumbai","delhi","new delhi","bangalore","bengaluru","hyderabad","chennai","kolkata","calcutta","pune","gurugram","gurgaon","noida","ahmedabad","surat","jaipur","lucknow","kanpur","nagpur","indore","thane","bhopal","visakhapatnam","vishakhapatnam","pimpri","patna","vadodara","coimbatore","ludhiana","agra","nashik","faridabad","meerut","rajkot","varanasi","banaras","srinagar","aurangabad","dhanbad","amritsar","navi mumbai","allahabad","prayagraj","ranchi","howrah","jabalpur","gwalior","vijayawada","mysore","hubli","mangalore","solapur","kota","trivandrum","thiruvananthapuram","kochi","ernakulam","madurai","salem","tiruchirappalli","trichy","bhubaneswar","cuttack","guwahati","shimla","dehradun","gangtok","itanagar","aizawl","kohima","imphal","agartala","panaji","porvorim","silchar","dibrugarh","tezpur","durgapur","asansol","siliguri","india","haryana","uttar pradesh","maharashtra","karnataka","tamil nadu","telangana","andhra pradesh","gujarat","west bengal","punjab","rajasthan","bihar","jharkhand","kerala","odisha","uttarakhand","chhattisgarh","assam","goa","sikkim","mizoram","tripura","nagaland","manipur","arunachal pradesh","meghalaya","himachal pradesh","california","new york","texas","florida","illinois","pennsylvania","ohio","georgia","north carolina","michigan","new jersey","virginia","washington","arizona","massachusetts","tennessee","indiana","missouri","maryland","wisconsin","colorado","minnesota","south carolina","alabama","louisiana","kentucky","oregon","oklahoma","connecticut","utah","iowa","nevada","arkansas","mississippi","kansas","new mexico","nebraska","west virginia","montana","idaho","hawaii","alaska","maine","new hampshire","vermont","rhode island","delaware","district of columbia","los angeles","san francisco","san diego","san jose","sacramento","fresno","oakland","new york city","nyc","buffalo","rochester","houston","dallas","austin","san antonio","fort worth","miami","orlando","tampa","jacksonville","atlanta","charlotte","raleigh","detroit","grand rapids","chicago","philadelphia","pittsburgh","cleveland","columbus","cincinnati","phoenix","boston","nashville","memphis","indianapolis","st louis","baltimore","milwaukee","denver","minneapolis","seattle","portland","las vegas","salt lake city","honolulu","ontario","quebec","british columbia","alberta","manitoba","saskatchewan","nova scotia","new brunswick","newfoundland and labrador","prince edward island","toronto","vancouver","montreal","ottawa","calgary","edmonton","winnipeg","halifax","victoria","london","manchester","birmingham","liverpool","glasgow","edinburgh","leeds","sheffield","bristol","cardiff","belfast","new south wales","victoria","queensland","south australia","western australia","tasmania","northern territory","australian capital territory","sydney","melbourne","brisbane","perth","adelaide","canberra","hobart","darwin","gold coast","dubai","abu dhabi","doha","riyadh","jeddah","amman","muscat","kuwait city","manama","berlin","munich","hamburg","frankfurt","stuttgart","paris","lyon","marseille","nice","toulouse","amsterdam","rotterdam","the hague","utrecht","zurich","geneva","basel","vienna","budapest","helsinki","stockholm","copenhagen","madrid","barcelona","valencia","seville","lisbon","porto","rome","milan","florence","naples","turin","venice","tokyo","osaka","kyoto","yokohama","nagoya","hong kong","shanghai","beijing","guangzhou","shenzhen","singapore","kuala lumpur","bangkok","jakarta","manila","seoul","busan","incheon","mexico city","guadalajara","monterrey","bogota","lima","santiago","buenos aires","cape town","johannesburg","nairobi","lagos","cairo","casablanca","accra","addis ababa"],n=[/\b\w+,\s*[A-Z]{2,3}\b/g,/\b\w+,\s*\w+\s*\d{5,6}\b/g,/\b\d{5,6}(-\d{4})?\b/g,/location\s*:?\s*\w+/gi,/address\s*:?\s*\w+/gi,/based\s+in\s+\w+/gi,/located\s+in\s+\w+/gi,/\bcity\s*:?\s*\w+/gi,/\bstate\s*:?\s*\w+/gi,/\bcurrent\s+location\s*:?\s*\w+/gi],i=s.some(o=>new RegExp(`\\b${o}\\b`,"i").test(t)),a=n.some(o=>o.test(e));return i||a}function W(e){const t=e.missing||[];return t.length>0?`Missing ${t.join(", ")} - complete contact information required`:"Contact information is complete and professional"}function G(e,t){let s=0;const n=e.toLowerCase(),i=E(e);return(n.includes("education")||n.includes("academic")||n.includes("qualification"))&&(s+=3),["bachelor","master","phd","doctorate","associate","diploma","certificate","degree","b.s.","b.a.","m.s.","m.a.","mba","ph.d."].some(h=>n.includes(h))&&(s+=3),K(e)&&(s+=2),T(e)&&(s+=2),i<3&&(Y(e)||(s-=2)),Math.max(Math.min(s,10),0)}function K(e){const t=["university","college","institute","school","academy","tech","polytechnic","community college"],s=e.toLowerCase();return t.some(n=>s.includes(n))}function T(e){return[/\b(19|20)\d{2}\b/g,/\d{1,2}\/\d{4}/g,/[A-Za-z]+\s+\d{4}/g,/\d{4}\s*[-–]\s*\d{4}/g].some(s=>s.test(e))}function Y(e){const t=e.toLowerCase(),s=[/gpa\s*:?\s*\d\.\d/gi,/\d\.\d{1,2}\s*gpa/gi,/\d\.\d{1,2}\/4\.0/gi],n=["magna cum laude","summa cum laude","cum laude","honors","dean's list","honor roll","distinction","academic excellence","merit","scholarship"],i=s.some(o=>o.test(e)),a=n.some(o=>t.includes(o));return i||a}function U(e,t){let s=0;const n=E(e);Z(e)&&(s+=2);const a=Q(e),o=J(n);a>=o.ideal?s+=3:a>=o.minimum?s+=2:a>=o.minimum*.5&&(s+=1);const r=X(e);s+=Math.min(r,3);const c=ee(e);return s+=Math.min(c,2),Math.min(s,10)}function Z(e){const t=e.toLowerCase();return["skills","technical skills","core competencies","competencies","expertise","proficiencies","technologies","tools"].some(n=>t.includes(n))}function Q(e){const t=e.toLowerCase(),s=["python","java","javascript","typescript","c++","c#","php","ruby","go","rust","swift","kotlin","scala","r","matlab","sql","html","css","react","angular","vue","node.js","express","django","flask","spring","bootstrap","jquery","tensorflow","pytorch","pandas","numpy","mysql","postgresql","mongodb","redis","elasticsearch","oracle","sqlite","aws","azure","gcp","docker","kubernetes","jenkins","git","github","terraform","ansible","ci/cd","linux","bash","jira","confluence","slack","trello","figma","photoshop","excel","tableau","power bi","salesforce","hubspot"],n=["project management","agile","scrum","kanban","waterfall","leadership","team management","communication","presentation","problem solving","analytical thinking","strategic planning","business analysis","process improvement","quality assurance","stakeholder management","budget management","risk management"];return[...s,...n].filter(o=>t.includes(o)).length}function J(e){return e<3?{minimum:8,ideal:12}:e<6?{minimum:12,ideal:18}:{minimum:18,ideal:25}}function X(e){const t=e.toLowerCase(),n=["artificial intelligence","machine learning","deep learning","ai/ml","cloud computing","microservices","apis","restful","graphql","blockchain","iot","big data","data science","analytics","agile methodology","devops","continuous integration","automation","test-driven development","object-oriented","responsive design","digital transformation","scalability","performance optimization","user experience","customer satisfaction","roi","kpi"].filter(i=>t.includes(i));return n.length>=4?3:n.length>=2?2:n.length>=1?1:0}function ee(e){let t=0;const s=e.toLowerCase();["programming languages","frameworks","databases","tools","technical skills","soft skills","languages","certifications"].filter(o=>s.includes(o)).length>=2&&(t+=1);const a=te(e);if(a){const o=/[•▪▫■□◦‣⁃-]/.test(a),r=a.includes(","),c=a.includes(`
`);(o||r||c)&&(t+=1)}return t}function te(e){const t=e.toLowerCase(),s=["skills","technical skills","competencies"];let n=-1;for(const o of s){const r=t.indexOf(o);if(r!==-1){n=r;break}}if(n===-1)return null;const i=["experience","education","projects","certifications"];let a=e.length;for(const o of i){const r=t.indexOf(o,n+10);r!==-1&&r<a&&(a=r)}return e.substring(n,a)}function ne(e,t){let s=0;if(window.ActionVerbs){const n=window.ActionVerbs.countVerbsInText(e,"RESEARCH_AND_ANALYSIS_SKILLS"),i=window.ActionVerbs.countVerbsInText(e,"PROBLEM_SOLVING_SKILLS");s+=Math.min(n*1.5,6),s+=Math.min(i*1.2,4);const o=["analysis","analytical","data","research","statistics","metrics","insights"].filter(r=>e.toLowerCase().includes(r)).length;s+=Math.min(o*.3,2)}else{const n=e.toLowerCase(),a=["analysis","analytical","data","research","investigate","evaluate","assess","statistics"].filter(o=>n.includes(o)).length;s+=Math.min(a*1.25,10)}return Math.min(s,10)}function se(e,t){let s=0;if(window.ActionVerbs){const n=window.ActionVerbs.countVerbsInText(e,"LEADERSHIP_MENTORSHIP_AND_TEACHING_SKILLS"),i=window.ActionVerbs.countVerbsInText(e,"MANAGEMENT_SKILLS");s+=Math.min(n*.8,6),s+=Math.min(i*.7,4);const o=["director","manager","lead","supervisor","head","chief","senior"].filter(r=>e.toLowerCase().includes(r)).length;s+=Math.min(o*.3,1)}else{const n=e.toLowerCase(),a=["lead","leader","manage","director","supervisor","team","mentor","coach"].filter(o=>n.includes(o)).length;s+=Math.min(a*1.25,10)}return Math.min(s,10)}function ie(e,t){const s=(e.match(/[•▪▫■□◦‣⁃]/g)||[]).length,n=(e.match(/^\s*[-*]\s/gm)||[]).length;let i=0;return s+n>10?i+=6:s+n>5?i+=4:s+n>0&&(i+=2),(s>n||n>s)&&(i+=2),s+n>=3&&(i+=2),Math.min(i,10)}function ae(e){return oe(e).then(t=>{et(t)}),Je(e)}async function oe(e){try{const r=await fetch("/api/grammar-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.dumps({text:e,check_type:"spelling"})});if(r.ok){const c=await r.json();return Math.max(Math.min(c.spelling_score||8,10),0)}}catch(r){console.warn("LLM spelling check failed, using fallback:",r)}let t=0;e.length>200?t=8:e.length>100?t=6:e.length>50?t=4:t=2;const n=["recieved","seperate","managment","acheivement","excelent","experiance","responsibilty","occured"].filter(r=>e.toLowerCase().includes(r)).length;return t-=n*1.5,[/\d{1,2}\/\d{4}/g,/\d{4}-\d{2}/g,/[A-Za-z]+ \d{4}/g].map(r=>(e.match(r)||[]).length).filter(r=>r>0).length>1&&(t-=1),Math.max(t,0)}function re(e){return ce(e).then(t=>{Xe(t)}),Qe(e)}async function ce(e){try{const i=await fetch("/api/grammar-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,check_type:"grammar"})});if(i.ok){const a=await i.json();return Math.max(Math.min(a.grammar_score||8,10),0)}}catch(i){console.warn("LLM grammar check failed, using fallback:",i)}let t=0;const s=[/\bis\s+are\b/gi,/\bare\s+is\b/gi,/\bi\s+are\b/gi,/\byou\s+is\b/gi];let n=0;return s.forEach(i=>{n+=(e.match(i)||[]).length}),e.length>100?t=8:e.length>50?t=6:t=4,t-=Math.min(n*2,6),Math.max(t,0)}function le(e){let t=0;e.length>100?t=7:e.length>50?t=5:t=3;const s=e.match(/\b\w+ed\b/g)||[],n=e.match(/\b(manage|lead|develop|create|implement)\b/gi)||[];return s.length>0&&n.length>0&&Math.min(s.length,n.length)/Math.max(s.length,n.length)>.3&&(t-=3),Math.max(t,3)}function de(e){return window.ActionVerbs?ue(e):ge(e)}function ue(e){let t=10;const s=["STRONG_ACCOMPLISHMENT_DRIVEN_VERBS","ENTREPRENEURIAL_SKILLS","MANAGEMENT_SKILLS","LEADERSHIP_MENTORSHIP_AND_TEACHING_SKILLS","PROBLEM_SOLVING_SKILLS","COMMUNICATION_SKILLS","RESEARCH_AND_ANALYSIS_SKILLS","PROCESS_IMPROVEMENT_CONSULTING_AND_OPERATIONS","FINANCIAL_SKILLS","DESIGN_AND_CREATIVE_SKILLS","ENGINEERING_TECHNICAL_ROLES","TEAMWORK_COLLABORATION_SKILLS"],n=me(e);if(n.length===0)return 3;const i=he(n,s),a=window.ActionVerbs.getVerbsForCategory("WEAK_VERBS"),o=Object.keys(i).length;o<5&&(o===4?t-=1:o===3?t-=2:o===2?t-=3:o===1?t-=4:t-=5);let r=0,c=0;for(const l of n)a.some(g=>l.toLowerCase().includes(g.toLowerCase())||g.toLowerCase().includes(l.toLowerCase()))?r++:s.some(u=>window.ActionVerbs.getVerbsForCategory(u).some(m=>m.toLowerCase()===l.toLowerCase()||m.toLowerCase().includes(l.toLowerCase())))||c++;return t-=r+c,Math.max(Math.min(t,10),0)}function me(e){const t=[],s=e.toLowerCase(),n=[/\b(managed|led|developed|created|implemented|achieved|increased|reduced|improved|delivered|executed|coordinated|supervised|administered|analyzed|designed|established|facilitated|generated|initiated|launched|optimized|organized|planned|produced|provided|supported|trained|collaborated|communicated|negotiated|presented|resolved|streamlined|transformed|upgraded|built|maintained|monitored|oversaw|recruited|directed|guided|mentored|coached|evaluated|assessed|identified|researched|tested|reviewed|audited|calculated|forecasted|interviewed|investigated|traced|classified|collected|compiled|processed|recorded|scheduled|arranged|prepared|operated|handled|assisted|helped|contributed|participated|worked|responsible)\b/g,/\b(manage|lead|develop|create|implement|achieve|increase|reduce|improve|deliver|execute|coordinate|supervise|administer|analyze|design|establish|facilitate|generate|initiate|launch|optimize|organize|plan|produce|provide|support|train|collaborate|communicate|negotiate|present|resolve|streamline|transform|upgrade|build|maintain|monitor|oversee|recruit|direct|guide|mentor|coach|evaluate|assess|identify|research|test|review|audit|calculate|forecast|interview|investigate|trace|classify|collect|compile|process|record|schedule|arrange|prepare|operate|handle|assist|help|contribute|participate|work)\b/g];for(const i of n){const a=s.match(i);a&&t.push(...a)}return[...new Set(t)]}function he(e,t){const s={};for(const n of t){const i=window.ActionVerbs.getVerbsForCategory(n),a=[];for(const o of e)i.some(c=>c.toLowerCase()===o.toLowerCase()||c.toLowerCase().includes(o.toLowerCase())||o.toLowerCase().includes(c.toLowerCase()))&&a.push(o);a.length>0&&(s[n]=a)}return s}function ge(e){let t=0;const s=["responsible for","duties included","helped with","assisted in","involved in","worked on"],n=["led","managed","developed","created","implemented","achieved","increased","improved"],i=s.reduce((o,r)=>o+(e.toLowerCase().split(r).length-1),0),a=n.reduce((o,r)=>o+(e.toLowerCase().split(r).length-1),0);return a>0&&i===0?t=10:a>i?t=7:a===i&&a>0?t=5:i>a&&a>0?t=3:i>0&&a===0?t=1:t=4,Math.max(Math.min(t,10),0)}function pe(e){const t=["was completed","were handled","was managed","were developed","was created"];let s=0;e.length>100?s=8:e.length>50?s=6:s=4;const n=t.reduce((i,a)=>i+(e.toLowerCase().split(a).length-1),0);return s-=Math.min(n*2,6),Math.max(s,2)}function fe(e){let t=0;const s=be(e),n=s.content||"",i=s.hasHeading||!1;if(console.log("Summary Section Analysis:",{summaryLength:n.length,hasHeading:i,summaryPreview:n.substring(0,300)+"...",originalPreview:s.content?s.content.substring(0,100):"No original content"}),!n||n.length<20)return 1;t=10;const a=P(n)||P(e);a||(t-=2);const o=ye(n);o||(t-=2);const r=ve(n);r||(t-=2);const c=we(n);c||(t-=2);const l=xe(n)||ke(n);return l||(t-=2),i||(t-=1),console.log("Summary scoring breakdown:",{hasExperience:a,hasSkills:o,hasBuzzWords:r,hasQuantification:c,isBrief:l,hasHeading:i,totalScore:Math.max(t,0)}),Math.max(t,0)}function be(e){const t=e.toLowerCase(),s=e.split(`
`).map(u=>u.trim()).filter(u=>u.length>0),n=["professional summary","executive summary","career summary","summary","objective","profile","overview","about","introduction"];let i=-1,a="";for(const u of n){const d=t.indexOf(u);d!==-1&&(i===-1||d<i)&&(i=d,a=u)}if(i!==-1){const u=e.substring(i),d=["experience","work history","employment","education","skills","technical skills","core competencies"];let m=u.length;for(const v of d){const x=u.toLowerCase().indexOf(v);x!==-1&&x<m&&x>a.length+10&&(m=x)}let p=u.substring(a.length,m).trim();return p=A(p),{content:p,hasHeading:!0}}let o=0;const r=[/^[A-Z][a-z]+ [A-Z][a-z]+/,/@/,/\b\d{3}[-.\s]?\d{3}[-.\s]?\d{4}\b/,/\b[A-Z]{2}\b|\bcity\b|\bstate\b/,/linkedin/i,/github/i];for(let u=0;u<Math.min(s.length,10);u++){const d=s[u];if(!r.some(p=>p.test(d))&&d.length>30){o=u;break}}const c=[];for(let u=o;u<Math.min(o+8,s.length);u++){const d=s[u];if(["experience","work history","employment","education","skills","projects","certifications"].some(p=>d.toLowerCase().includes(p))&&d.length<50||(d.length>20&&!d.match(/^[A-Z\s]{2,}$/)&&c.push(d),c.length>=2&&(d.length<10||d.match(/^[A-Z\s]{2,}$/))))break}const l=c.join(" ").trim();if(l.length>50)return{content:A(l),hasHeading:!1};const g=e.split(`

`).filter(u=>u.trim().length>50)[0]||"";return{content:A(g),hasHeading:!1}}function A(e){if(!e)return"";let t=e;return t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/([a-zA-Z])(\d)/g,"$1 $2"),t=t.replace(/(\d)([a-zA-Z])/g,(n,i,a)=>e.includes(i+"+")?n:i+" "+a),["and","of","in","to","with","for","the","as","at","by","on","or"].forEach(n=>{const i=new RegExp(`([a-z])${n}\\b`,"gi");t=t.replace(i,`$1 ${n}`);const a=new RegExp(`\\b${n}([a-z])`,"gi");t=t.replace(a,`${n} $1`)}),t=t.replace(/([a-z])([,.;:])/gi,"$1$2 "),t=t.replace(/([,.;:])([a-zA-Z])/g,"$1 $2"),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\be - commerce\b/gi,"e-commerce"),t=t.replace(/\bed - tech\b/gi,"ed-tech"),t=t.replace(/\bA R R\b/gi,"ARR"),t=t.replace(/\bR O I\b/gi,"ROI"),t=t.replace(/\bA I\b/gi,"AI"),t=t.replace(/\bM L\b/gi,"ML"),t=t.replace(/\bC P O\b/gi,"CPO"),t}function P(e){return[/(\d+)\+?\s*years?\s*(of\s*)?(experience|exp)/gi,/over\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/more than\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/(\d+)\+?\s*year\s*(experienced|professional)/gi,/(experienced|seasoned|veteran)\s*(professional|expert|leader)/gi,/\b(\d+)\+?\s*years?\b/gi,/(senior|lead|principal|staff)\s*(engineer|developer|manager|leader)/gi,/(accomplished|proven|established)\s*(professional|leader|expert)/gi].some(s=>s.test(e))}function ye(e){if(!window.SkillsBuzzwords)throw new Error("SkillsBuzzwords config not loaded - required for analysis");const t=window.SkillsBuzzwords.analyzeTextForSkillsAndBuzzwords(e);return console.log("Skills analysis (from config):",t.skills),t.score.hasSkills}function ve(e){if(!window.SkillsBuzzwords)throw new Error("SkillsBuzzwords config not loaded - required for analysis");const t=window.SkillsBuzzwords.analyzeTextForSkillsAndBuzzwords(e);return console.log("Buzzwords analysis (from config):",t.buzzwords),t.score.hasBuzzwords}function we(e){return[/\b\d+\.?\d*\s*%/g,/\$[\d,]+\.?\d*[kmb]?/gi,/\b\d{2,}[,\d]*\s*(users?|customers?|clients?|people|projects?|systems?|applications?)\b/gi,/\b(\d+x|doubled?|tripled?)\b/gi,/\b(over|more than|up to|above|exceeding?)\s*\d{2,}/gi,/\b\d+\s*(years?|months?)\s*(of\s*)?(experience|exp)/gi].some(s=>s.test(e))}function xe(e){const t=e.trim().split(/\s+/).length,s=e.split(/[.!?]+/).filter(n=>n.trim().length>5).length;return s>=2&&s<=4&&t>=50&&t<=150}function ke(e){const t=e.trim().split(/\s+/).length,s=e.split(/[.!?]+/).filter(n=>n.trim().length>5).length;return s>=1&&s<=6&&t>=30&&t<=300}function Se(e){let t=0;if(window.ActionVerbs){const s=window.ActionVerbs.countVerbsInText(e,"TEAMWORK_COLLABORATION_SKILLS"),n=window.ActionVerbs.countVerbsInText(e,"COMMUNICATION_SKILLS");t+=Math.min(s*1.5,6),t+=Math.min(n*.2,2);const a=["team","cross-functional","partnership","stakeholders","collaboration"].filter(o=>e.toLowerCase().includes(o)).length;t+=Math.min(a*.4,2)}else{const s=["team","collaborate","cooperation","partnership","group","cross-functional"],n=e.toLowerCase(),i=s.filter(a=>n.includes(a)).length;t+=Math.min(i*1.7,10)}return Math.min(t,10)}function Ce(e){let t=10;const s=[];if(window.ActionVerbs){const d=window.ActionVerbs.getAllStrongVerbs();s.push(...d)}const n={},i=e.toLowerCase();s.forEach(d=>{const m=d.toLowerCase(),p=new RegExp(`\\b${m}\\b`,"gi"),v=i.match(p);v&&v.length>1&&(n[m]=v.length)});const a=Object.values(n).filter(d=>d>1);t-=a.length;const o=e.toLowerCase().split(/\s+/),r={},c=["that","this","with","from","have","been","were","will","they","them","their","there","where","when","what","which","work","team","project","company","business","experience","years"];o.forEach(d=>{const m=d.replace(/[^\w]/g,"");m.length>4&&!c.includes(m)&&(r[m]=(r[m]||0)+1)});const l=Object.values(r).filter(d=>d>3).length;t-=Math.min(l*.5,3);const h=e.toLowerCase().match(/\b\w+\s+\w+\b/g)||[],g={};h.forEach(d=>{!c.includes(d.split(" ")[0])&&!c.includes(d.split(" ")[1])&&(g[d]=(g[d]||0)+1)});const u=Object.values(g).filter(d=>d>1).length;return t-=Math.min(u*.5,2),Math.max(t,0)}function Le(e){const t=e.toLowerCase();let s=10;const i=["references available","hobbies","interests","personal information"].filter(a=>t.includes(a)).length;return s-=i*2,Math.max(s,4)}function Ae(e){const t=e.toLowerCase(),s=["promoted","advancement","progression","senior","lead","principal","director"];let n=0;const i=s.filter(a=>t.includes(a)).length;return n+=Math.min(i*1.4,10),Math.min(n,10)}function Me(e){let t=10;const s=e.trim().split(/\s+/).length,n=e.length,i=e.split(`
`).length,a=Math.ceil(s/550);E(e)<6?a>1&&(a===2?t-=4:a>=3&&(t-=7)):a>2&&(t-=5);const r=s/a;r<300?t-=2:r>700&&(t-=3);const c=s/i;c<3?t-=1:c>15&&(t-=2);const l=Ee(e);t+=l;const h=(e.match(/\s/g)||[]).length/n;return h<.15?t-=2:h>.25&&(t-=1),Math.max(Math.min(t,10),0)}function E(e){const t=e.toLowerCase(),s=[/(\d+)\+?\s*years?\s*(of\s*)?(experience|exp)/gi,/over\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/more than\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi];for(const a of s){const o=t.match(a);if(o){const r=o[0].match(/\d+/);if(r)return parseInt(r[0])}}const n=new Date().getFullYear(),i=e.match(/\b(19|20)\d{2}\b/g);if(i&&i.length>=2){const a=i.map(c=>parseInt(c)).sort(),o=a[0];if(a[a.length-1]>=n-1)return Math.min(n-o,20)}return e.length>2e3?8:e.length>1500?5:3}function Ee(e){let t=0;[/\b(professional\s+)?(summary|objective|profile)\b/gi,/\b(professional\s+|work\s+)?experience\b/gi,/\beducation\b/gi,/\bskills\b/gi,/\b(contact|contact\s+information)\b/gi].filter(c=>c.test(e)).length>=4&&(t+=1),(e.match(/[•▪▫■□◦‣⁃-]/g)||[]).length>=5&&(t+=.5);const a=[(e.match(/\d{4}\s*[-–]\s*\d{4}/g)||[]).length,(e.match(/\d{1,2}\/\d{4}/g)||[]).length,(e.match(/[A-Za-z]+\s+\d{4}/g)||[]).length],o=Math.max(...a),r=a.reduce((c,l)=>c+l,0);return r>0&&o/r>=.8&&(t+=.5),Math.min(t,2)}function Ie(e){const t=ze(e);if(!t||t.length<50)return 0;const s=Pe(t);if(s.length===0)return 0;const n=s.filter(o=>Ve(o)),i=s.length,a=n.length/i*100;return a>80?10:a>=70?9:a>=60?8:a>=50?7:a>=40?5:a>=30?4:a>=20?3:a>=10?2:a>0?1:0}function ze(e){const t=e.toLowerCase(),s=["professional experience","work experience","employment history","career history","experience","employment","work history"];let n=-1,i="";for(const c of s){const l=t.indexOf(c);l!==-1&&(n===-1||l<n)&&(n=l,i=c)}if(n===-1)return e;const a=["education","skills","certifications","projects","awards"];let o=e.length;const r=t.substring(n+i.length);for(const c of a){const l=r.indexOf(c);l!==-1&&l<o-n-i.length&&(o=n+i.length+l)}return e.substring(n,o)}function Pe(e){const t=[/^[\s]*[•▪▫■□◦‣⁃]\s*(.+)$/gm,/^[\s]*[-*]\s*(.+)$/gm,/^[\s]*\d+\.\s*(.+)$/gm,/^[\s]*[→‣►]\s*(.+)$/gm],s=[];for(const n of t){const i=e.matchAll(n);for(const a of i)a[1]&&a[1].trim().length>10&&s.push(a[1].trim())}if(s.length===0){const i=e.split(/[.!?]+/).filter(a=>a.trim().length>20).filter(a=>{const o=a.toLowerCase();return/\b(led|managed|developed|created|implemented|achieved|increased|reduced|improved|delivered|executed|coordinated|supervised)\b/.test(o)});s.push(...i.map(a=>a.trim()))}return s}function Ve(e){const t=e.toLowerCase();return!!(/\b\d+\.?\d*\s*%/.test(t)||/\$[\d,]+\.?\d*[kmb]?/i.test(t)||/\b\d{3,}[,\d]*\s*(users?|customers?|clients?|employees?|people|projects?|systems?|applications?|processes?|hours?|days?|months?|years?)\b/i.test(t)||/\b\d+\.?\d*\s*(hours?|minutes?|days?|weeks?|months?|years?)\b.*\b(saved?|reduced?|faster|quicker)\b/i.test(t)||/\b(\d+x|doubled?|tripled?|quadrupled?)\b/i.test(t)||/\b\d+[-–to]\d+\b/i.test(t)||/\b(team of|managed?|led|supervised?)\s*\d+/i.test(t)||/\b(over|more than|up to|above|exceeding?)\s*\d{2,}/i.test(t))}function $e(e){const t=e.toLowerCase(),s=["initiative","self-motivated","proactive","launched","founded","created","innovated"];let n=0;const i=s.filter(a=>t.includes(a)).length;return n+=Math.min(i*1.4,10),Math.min(n,10)}function Oe(e){if(!b)return;b.innerHTML="";const t=y.filter(n=>n.score&&n.score<9);if(t.length===0){b.innerHTML=`
            <div class="text-center py-8">
                <div class="text-6xl mb-4">🎉</div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Perfect ATS Score!</h3>
                <p class="text-gray-600">All categories are optimized. Your resume is ready!</p>
            </div>
        `;return}t.forEach((n,i)=>{const a=document.createElement("div");a.className=`issue-card severity-${n.severity}`;const o=n.score>=8?"text-yellow-600":n.score>=6?"text-orange-600":"text-red-600";a.innerHTML=`
            <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                    <h3 class="text-lg font-semibold text-gray-900">${n.title}</h3>
                    <div class="text-sm font-bold ${o}">${n.score}/10</div>
                </div>
                <p class="text-gray-600 mb-3">${n.description}</p>
                <div class="flex items-center justify-between">
                    <div class="impact-badge">
                        ${Re(n.impact)} ${je(n.impact)}
                    </div>
                    <div class="text-xs text-gray-500">
                        ${_e(n.severity)}
                    </div>
                </div>
            </div>
            <button class="fix-button" onclick="handleFixIssue('${n.title}', ${i})">
                FIX →
            </button>
        `,b.appendChild(a)});const s=document.createElement("div");s.className="bg-blue-50 border border-blue-200 rounded-12 p-6 mb-6",s.innerHTML=`
        <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-4">
                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <div>
                <h3 class="text-lg font-semibold text-gray-900">ATS Analysis Summary</h3>
                <p class="text-sm text-gray-600">${t.length} areas need improvement out of 21 categories analyzed</p>
            </div>
        </div>
        <div class="grid grid-cols-3 gap-4 text-center">
            <div>
                <div class="text-2xl font-bold text-red-600">${y.filter(n=>n.score<6).length}</div>
                <div class="text-xs text-gray-600 uppercase">High Priority</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-yellow-600">${y.filter(n=>n.score>=6&&n.score<=8).length}</div>
                <div class="text-xs text-gray-600 uppercase">Need Fixes</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-green-600">${y.filter(n=>n.score>=9).length}</div>
                <div class="text-xs text-gray-600 uppercase">Completed</div>
            </div>
        </div>
    `,b.insertBefore(s,b.firstChild)}function Be(e){if(!w||!N)return;const s=M(e).filter(a=>a.score>=9);if(w.innerHTML="",s.length===0){const a=document.createElement("div");a.className="strength-item",a.innerHTML=`
            <div class="check-icon">
                <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <div class="flex-1">
                <h4 class="font-semibold text-gray-900">Your resume is being analyzed</h4>
                <p class="text-gray-600 mt-1">We're identifying your strengths and areas for improvement to help you create an interview-ready resume.</p>
            </div>
        `,w.appendChild(a);return}const n=s.slice(0,3),i=s.slice(3);if(n.forEach(a=>{const o=document.createElement("div");o.className="strength-item",o.innerHTML=`
            <div class="check-icon">
                <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <div class="flex-1">
                <h4 class="font-semibold text-gray-900">${a.name} (${a.score}/10):</h4>
                <p class="text-gray-600 mt-1">${V(a.name,a.score)}</p>
            </div>
        `,w.appendChild(o)}),i.length>0){const a=document.createElement("div");a.className="mt-4",a.innerHTML=`
            <button class="expand-toggle w-full flex items-center justify-between py-3 px-4 bg-gray-50 hover:bg-gray-100 rounded-lg border transition-colors" 
                    onclick="toggleAdditionalStrengths(this)">
                <span class="text-sm font-medium text-gray-700">
                    Show ${i.length} more completed categories
                </span>
                <svg class="w-5 h-5 text-gray-500 transition-transform chevron-down" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="additional-strengths hidden mt-3">
                ${i.map(o=>`
                    <div class="strength-item">
                        <div class="check-icon">
                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-900">${o.name} (${o.score}/10):</h4>
                            <p class="text-gray-600 mt-1">${V(o.name,o.score)}</p>
                        </div>
                    </div>
                `).join("")}
            </div>
        `,w.appendChild(a)}}function Ne(e){const t=e.nextElementSibling,s=e.querySelector("svg"),n=e.querySelector("span");if(t.classList.contains("hidden")){t.classList.remove("hidden"),s.style.transform="rotate(180deg)";const i=t.querySelectorAll(".strength-item").length;n.textContent=`Hide ${i} additional categories`,setTimeout(()=>{const a=document.getElementById("upgradeBtn");a&&a.scrollIntoView({behavior:"smooth",block:"end"})},300)}else{t.classList.add("hidden"),s.style.transform="rotate(0deg)";const i=t.querySelectorAll(".strength-item").length;n.textContent=`Show ${i} more completed categories`}}window.toggleAdditionalStrengths=Ne;function V(e,t){return{Summary:"Your professional summary effectively highlights your experience, key skills, and includes quantifiable achievements with appropriate length.","Quantity Impact":"Excellent use of numbers and metrics! Most of your achievements are quantified with specific percentages, dollar amounts, or other measurable results.","Weak Verbs":"Great action verb diversity! Your resume uses strong, varied action verbs from multiple categories showing leadership, accomplishment, and professional skills.",Verbosity:"Perfect balance of detail and conciseness. Your content is comprehensive yet easy to read and scan quickly.","Spelling & Consistency":"Excellent spelling and formatting consistency throughout your resume. Professional presentation with no errors detected.",Grammar:"Outstanding grammar quality with professional language, proper tense usage, and clear sentence structure throughout.","Contact Details":"Complete contact information including mobile number, professional email address, LinkedIn profile, and location details.","Unnecessary Sections":"Well-structured resume with only relevant, professional sections that add value for recruiters and hiring managers.",Repetition:"Good variety in language and phrasing. No overuse of words or repetitive content that could bore readers.","Education Section":"Education section is appropriately detailed for your experience level with proper formatting and relevant information.","Skills Section":"Skills section effectively showcases relevant technical and professional competencies appropriate for your career level.","Active Voice":"Excellent use of active voice throughout your resume, making your achievements sound impactful and direct.","Use of Bullets":"Well-formatted bullet points that are scannable and highlight key achievements effectively.",Analytical:"Strong demonstration of analytical thinking and problem-solving capabilities in your experience descriptions.",Teamwork:"Good examples of collaboration and teamwork skills demonstrated throughout your professional experience.","Growth Signals":"Clear indicators of professional growth, advancement, and increasing responsibilities in your career progression.",Drive:"Excellent demonstration of initiative, motivation, and results-driven approach in your accomplishments.","Job Fit":"Your experience and skills align well with typical requirements for your target roles and industry.",Leadership:"Strong leadership examples showing your ability to guide teams, manage projects, and influence outcomes.","Page Density":"Optimal page layout with appropriate white space, readable formatting, and professional presentation that's easy to scan.","Verb Tenses":"Consistent and correct verb tense usage - past tense for previous roles, present tense for current position."}[e]||`Excellent performance in ${e} with a score of ${t}/10. This area of your resume meets professional standards.`}function Re(e){return{BREVITY:"📝",IMPACT:"⚡",SECTIONS:"📋",STYLE:"🎨",ALL:"🎯"}[e]||"📌"}function je(e){return e||"ALL"}function _e(e){return{high:"High Priority",medium:"Medium Priority",low:"Low Priority"}[e]||"Medium Priority"}window.handleFixIssue=function(e,t){console.log(`Fix requested for: ${e}`);const s=qe(e,f);Ye(e,s)};function qe(e,t){const s=t.insights||{},n=t.resume_text||t.text||"";return Fe(e,s,n)}function Fe(e,t,s){const n=[],i=t.quick_wins||[],a=t.critical_issues||[],o=t.improvement_suggestions||[],r=[...i,...a,...o],c=De(e,r);if(c.length>0)c.forEach(l=>{n.push({line:We(l,s),issue:l.title||l.issue||l.suggestion||"Issue needs attention",fix:l.recommendation||l.solution||`Improved version addressing: ${l.issue||l.suggestion}`,fromAnalysis:!0})});else{const l=Ke(e,s);n.push(...l)}return n.slice(0,3)}function De(e,t,s){const n=He(e);return t.filter(i=>{const a=(i.title||i.issue||i.suggestion||"").toLowerCase();return n.some(o=>a.includes(o))})}function He(e){return{summary:["summary","objective","profile","overview"],"quantity impact":["quantify","metric","number","percentage","result","achievement"],"weak verbs":["verb","action","responsible","duties","passive"],verbosity:["concise","wordy","lengthy","verbose","brief"],"spelling & consistency":["spelling","typo","error","consistent","mistake"],grammar:["grammar","tense","sentence","structure"],"active voice":["active","passive","voice"],"verb tenses":["tense","past","present","consistent"],"education section":["education","degree","university","school"],"skills section":["skills","technical","competencies"],"contact details":["contact","phone","email","address"],"use of bullets":["bullet","format","list","structure"]}[e.toLowerCase()]||[e.toLowerCase()]}function We(e,t){if(!t)return"Content from your resume that needs attention";const s=t.split(`
`).filter(i=>i.trim().length>10),n=(e.title||e.issue||"").toLowerCase().split(" ");for(let i of s){const a=i.toLowerCase().split(" ");if(n.filter(r=>a.some(c=>c.includes(r)&&r.length>3)).length>0)return i.trim()}return Ge(e,s)}function Ge(e,t){var n;const s=(e.title||e.issue||"").toLowerCase();for(let i of t)if(s.includes("verb")&&(i.includes("responsible for")||i.includes("duties include"))||s.includes("quantify")&&(i.includes("improved")||i.includes("increased"))&&!i.match(/\d+/)||s.includes("summary")&&(i.includes("seeking")||i.includes("professional")))return i.trim();return((n=t.find(i=>i.length>30))==null?void 0:n.trim())||"Sample content from your resume"}function Ke(e,t){if(!t||t.length<50)return[{line:"Analysis requires resume content",issue:`${e} category needs review based on ATS standards`,fix:"Upload your resume for detailed line-by-line analysis"}];const s=t.split(`
`).filter(i=>i.trim().length>15),n=[];return s.forEach(i=>{if(n.length>=2)return;const a=Te(i,e);a&&n.push(a)}),n.length===0&&n.push({line:s[0]||"Resume content",issue:`${e} optimization needed for better ATS performance`,fix:"Professional optimization will improve this section for ATS systems"}),n}function Te(e,t){const s=t.toLowerCase();return s.includes("verb")&&(e.toLowerCase().includes("responsible for")||e.toLowerCase().includes("duties include"))?{line:e.trim(),issue:"Uses weak passive language instead of strong action verbs",fix:"Replace with specific action verbs showing leadership and results"}:s.includes("quantify")&&(e.includes("improved")||e.includes("increased"))&&!e.match(/\d+/)?{line:e.trim(),issue:"Claims improvement without specific metrics or numbers",fix:"Add quantified results with percentages, dollar amounts, or specific numbers"}:s.includes("spelling")&&e.length>50?{line:e.trim(),issue:"May contain spelling or consistency issues requiring review",fix:"Professional review will identify and correct any errors"}:null}function Ye(e,t){const s=document.createElement("div");s.className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",s.id="issueDetailModal",s.innerHTML=`
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-xl font-bold text-gray-900">Fix: ${e}</h2>
                <button onclick="closeIssueModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="p-6">
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Specific Issues Found in Your Resume:</h3>
                    <p class="text-gray-600">Here are examples of areas that need improvement for better ATS optimization:</p>
                </div>
                
                ${t.map((n,i)=>`
                    <div class="mb-8 border border-gray-200 rounded-lg overflow-hidden">
                        <div class="bg-red-50 p-4 border-b border-gray-200">
                            <h4 class="font-semibold text-red-800 mb-2">❌ Current (Problematic):</h4>
                            <div class="bg-white p-3 rounded border-l-4 border-red-500">
                                <code class="text-sm text-gray-800">"${n.line}"</code>
                            </div>
                            <p class="text-sm text-red-700 mt-2"><strong>Issue:</strong> ${n.issue}</p>
                        </div>
                        
                        <div class="bg-green-50 p-4">
                            <h4 class="font-semibold text-green-800 mb-2">✅ Improved (ATS-Optimized):</h4>
                            <div class="bg-white p-3 rounded border-l-4 border-green-500">
                                <code class="text-sm text-gray-800">"${n.fix}"</code>
                            </div>
                        </div>
                    </div>
                `).join("")}
                
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8">
                    <h4 class="font-semibold text-blue-800 mb-3">💡 Why This Matters for ATS:</h4>
                    <p class="text-blue-700 text-sm">
                        ${Ue(e)}
                    </p>
                </div>
                
                <div class="flex gap-4 mt-8">
                    <button onclick="closeIssueModal()" class="flex-1 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg font-medium hover:bg-gray-300">
                        I'll Fix This Manually
                    </button>
                    <button onclick="handleAutoFix('${e}')" class="flex-1 bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700">
                        🚀 Auto-Fix with AI - FREE
                    </button>
                </div>
            </div>
        </div>
    `,document.body.appendChild(s)}function Ue(e){return{summary:"ATS systems scan for specific keywords and value propositions in the summary. Generic statements reduce your ranking compared to candidates with targeted, quantified summaries.","quantity impact":"ATS algorithms favor resumes with quantified achievements. Numbers and metrics demonstrate measurable impact and help you stand out in automated screening.","weak verbs":'Strong action verbs signal leadership and initiative to ATS systems. Weak verbs like "responsible for" are passive and reduce the impact score of your accomplishments.',verbosity:"ATS systems may truncate overly long descriptions, causing important information to be missed. Concise, impactful statements ensure all your achievements are captured.","spelling & consistency":"ATS systems flag spelling errors as quality indicators. Even minor mistakes can significantly impact your overall ATS score and prevent you from reaching human reviewers.","active voice":"ATS systems favor active voice as it demonstrates ownership and leadership. Passive voice can make your achievements seem less impactful and reduce keyword matching.","verb tenses":"Consistent verb tenses help ATS systems understand your career timeline. Inconsistent tenses can confuse parsing algorithms and misrepresent your experience."}[e.toLowerCase()]||"Optimizing this area will improve your ATS score and increase your chances of passing automated screening systems used by most companies."}window.closeIssueModal=function(){const e=document.getElementById("issueDetailModal");e&&e.remove()};window.handleAutoFix=function(e){console.log(`Auto-fix requested for: ${e}`),closeIssueModal(),sessionStorage.setItem("fixIssue",e),sessionStorage.setItem("pendingUpgrade","true"),sessionStorage.setItem("upgradeSource","specific_fix"),S&&S.click()};function Ze(){S&&S.addEventListener("click",()=>{sessionStorage.setItem("pendingUpgrade","true"),sessionStorage.setItem("upgradeSource","results_page"),window.location.href="./payment.html"})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",$):$();async function $(){try{window.ActionVerbs&&await window.ActionVerbs.loadActionVerbs(),console.log("ActionVerbs module loaded, initializing results page")}catch(e){console.warn("Failed to load ActionVerbs, proceeding with fallback analysis:",e)}O()}function Qe(e){let t=0;const s=[/\bis\s+are\b/gi,/\bare\s+is\b/gi,/\bi\s+are\b/gi,/\byou\s+is\b/gi];let n=0;return s.forEach(i=>{n+=(e.match(i)||[]).length}),e.length>100?t=8:e.length>50?t=6:t=4,t-=Math.min(n*2,6),Math.max(t,0)}function Je(e){let t=0;e.length>200?t=8:e.length>100?t=6:e.length>50?t=4:t=2;const n=["recieved","seperate","managment","acheivement","excelent","experiance","responsibilty","occured"].filter(r=>e.toLowerCase().includes(r)).length;return t-=n*1.5,[/\d{1,2}\/\d{4}/g,/\d{4}-\d{2}/g,/[A-Za-z]+ \d{4}/g].map(r=>(e.match(r)||[]).length).filter(r=>r>0).length>1&&(t-=1),Math.max(t,0)}function Xe(e){document.querySelectorAll('[data-category="Grammar"]').forEach(s=>{const n=s.querySelector(".score");n&&(n.textContent=`${e}/10`,n.className=`score ${e>=8?"text-green-600":e>=6?"text-yellow-600":"text-red-600"}`)}),B()}function et(e){document.querySelectorAll('[data-category="Spelling & Consistency"]').forEach(s=>{const n=s.querySelector(".score");n&&(n.textContent=`${e}/10`,n.className=`score ${e>=8?"text-green-600":e>=6?"text-yellow-600":"text-red-600"}`)}),B()}function B(){const e=document.querySelectorAll(".score");let t=0,s=0;if(e.forEach(n=>{const i=n.textContent.match(/(\d+)\/10/);i&&(t+=parseInt(i[1]),s++)}),s>0){const n=Math.round(t/s*10),i=document.querySelector("#overall-score");i&&(i.textContent=n)}}window.debugResults={analysisData:()=>f,allIssues:()=>y,reinit:O};
