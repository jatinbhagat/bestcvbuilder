const a=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",i=a?"https://bestcvbuilder-api.onrender.com/api":"/api",r=`${i}/cv-parser`,g="BUILD-2025-08-05-08:30:00-UI-FIXED";console.log("ðŸ”— API Configuration v1.1.0:",{API_BASE_URL:i,CV_PARSER_ENDPOINT:r});console.log("ðŸš¨ CRITICAL: Verify this shows correct URL - should NOT be bestcvbuilder-gamma!");async function c(o,s=null){try{console.log("Starting ATS analysis for file:",o);const e={file_url:o,analysis_type:"ats_score",include_recommendations:!0};s&&(e.user_id=s,console.log("Including user_id for database saving:",s));const n=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`API request failed: ${n.status}`);const t=await n.json();return console.log("ATS analysis completed:",t),l(t,o)}catch(e){throw console.error("ATS analysis failed:",e),e}}function l(o,s){return{score:o.ats_score||0,scoreCategory:d(o.ats_score),strengths:o.strengths||[],improvements:o.improvements||[],detailedAnalysis:o.detailed_analysis||"",keywords:o.keywords||[],missingKeywords:o.missing_keywords||[],formattingIssues:o.formatting_issues||[],suggestions:o.suggestions||[],originalFileUrl:s,timestamp:new Date().toISOString()}}function d(o){return o>=90?"excellent":o>=80?"good":o>=70?"fair":o>=60?"poor":"very_poor"}const y=async(o,s=null)=>c(o,s);export{i as A,g as B,r as C,y as a};
