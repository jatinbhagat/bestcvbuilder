import"./supabase-DQ_B3N6C-v2.js";import"./atsAnalysis-CFcDtclU-v2.js";const x=document.getElementById("atsScore"),g=document.getElementById("scoreCircle"),L=document.getElementById("markedAsDone"),w=document.getElementById("topFixesList"),S=document.getElementById("completedList"),p=document.getElementById("issuesList"),z=document.getElementById("strengthsList"),O=document.getElementById("strengthsSection"),k=document.getElementById("upgradeBtn");let m=null,b=[],h=null,R=null;async function M(){try{const e=sessionStorage.getItem("atsAnalysis");if(!e){console.error("No analysis data found in session storage"),window.location.href="./index.html";return}m=JSON.parse(e),console.log("Analysis data loaded:",m),await F(),oe(m),re(m),Le(m),Ee(m),We()}catch(e){console.error("Error initializing results page:",e),B()}}function B(){if(console.log("Displaying fallback results..."),m&&x&&(x.textContent=Math.round(m.score||75),g)){const e=m.score||75;e>=80?g.style.borderColor="#10b981":e>=60?g.style.borderColor="#f59e0b":g.style.borderColor="#ef4444"}p&&(p.innerHTML=`
            <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 text-center">
                <h3 class="text-xl font-bold text-blue-900 mb-2">Analysis Complete!</h3>
                <p class="text-blue-700">Your resume has been analyzed. Click the button below to get your optimized version.</p>
            </div>
        `)}async function F(){try{console.log("Loading config files...");const e=await fetch("./config/skills-buzzwords.json");e.ok?(h=await e.json(),console.log("‚úÖ Skills-buzzwords config loaded")):console.warn("‚ö†Ô∏è Failed to load skills-buzzwords.json");const t=await fetch("./config/action-verbs.json");t.ok?(R=await t.json(),console.log("‚úÖ Action-verbs config loaded")):console.warn("‚ö†Ô∏è Failed to load action-verbs.json")}catch(e){console.warn("‚ö†Ô∏è Error loading config files:",e)}}function P(e){const t=e.content||e.text||"",n=[];return n.push({name:"Contact Information",score:ce(t),issue:"Complete contact details with phone, email, LinkedIn",impact:"SECTIONS"}),n.push({name:"Professional Summary",score:ve(t),issue:"Add compelling professional summary section",impact:"SECTIONS"}),n.push({name:"Work Experience",score:H(t),issue:"Improve work experience descriptions",impact:"SECTIONS"}),n.push({name:"Education Section",score:he(t),issue:"Complete education details",impact:"SECTIONS"}),n.push({name:"Skills Section",score:T(t),issue:"Add relevant technical skills",impact:"KEYWORDS"}),n.push({name:"Keywords Optimization",score:D(t),issue:"Include industry-specific keywords",impact:"KEYWORDS"}),n.push({name:"Action Verbs",score:q(t),issue:"Use strong action verbs",impact:"LANGUAGE"}),n.push({name:"Quantifiable Achievements",score:N(t),issue:"Add measurable accomplishments",impact:"IMPACT"}),n.push({name:"Grammar & Spelling",score:be(t),issue:"Fix grammar and spelling errors",impact:"QUALITY"}),n.push({name:"Formatting & Layout",score:K(t),issue:"Improve document formatting",impact:"FORMAT"}),n.push({name:"Resume Length",score:_(t),issue:"Optimize resume length",impact:"FORMAT"}),n.push({name:"Section Headers",score:J(t),issue:"Use clear section headers",impact:"STRUCTURE"}),n.push({name:"Bullet Points",score:Q(t),issue:"Improve bullet point structure",impact:"FORMAT"}),n.push({name:"Job Titles",score:X(t),issue:"Clear and consistent job titles",impact:"STRUCTURE"}),n.push({name:"Company Names",score:ee(t),issue:"Include recognizable company names",impact:"CREDIBILITY"}),n.push({name:"Dates & Duration",score:te(t),issue:"Consistent date formatting",impact:"FORMAT"}),n.push({name:"Certifications",score:ne(t),issue:"Add relevant certifications",impact:"CREDENTIALS"}),n.push({name:"Industry Buzzwords",score:se(t),issue:"Include industry-specific terms",impact:"RELEVANCE"}),n.push({name:"ATS Compatibility",score:ie(t),issue:"Improve ATS readability",impact:"TECHNICAL"}),n.push({name:"White Space & Design",score:ae(t),issue:"Optimize visual layout",impact:"READABILITY"}),n.push({name:"File Format",score:10,issue:"Use ATS-friendly file format",impact:"TECHNICAL"}),n}function H(e){const t=/experience|work|job|position|role/i.test(e),n=/achieved|accomplished|increased|improved|led|managed/i.test(e);return t&&n?8:t?6:3}function T(e){return/skills|technical|technologies|tools/i.test(e)?8:4}function D(e){const t=e.split(" ").length;return t>200?7:t>100?5:3}function q(e){const n=["achieved","managed","led","developed","created","improved"].filter(s=>e.toLowerCase().includes(s));return Math.min(n.length*2,10)}function N(e){const t=W(e);if(!t)return 1;const n=Y(t);if(n.length===0)return 1;const i=n.filter(a=>U(a)).length/n.length*100;return i>90?10:i>80?9:i>70?8:i>60?7:i>50?6:i>40?5:i>30?4:i>20?3:i>10?2:1}function W(e){const t=e.toLowerCase(),n=["experience","work experience","professional experience","employment history","career history","work history"],s=["education","academic background","qualifications","skills","technical skills","core skills","key skills","projects","personal projects","key projects","certifications","certificates","licenses","awards","achievements","honors","references","contact","additional information"];let i=-1;for(let o of n){const r=t.indexOf(o);if(r!==-1){i=r;break}}if(i===-1){const o=["developer","manager","analyst","engineer","coordinator","specialist","consultant","director","associate"];for(let r of o){const l=t.indexOf(r);if(l!==-1){i=Math.max(0,l-50);break}}}if(i===-1)return null;let a=e.length;for(let o of s){const r=t.indexOf(o,i);r!==-1&&r>i&&(a=Math.min(a,r))}return e.substring(i,a)}function Y(e){const t=e.split(`
`),n=[];for(let s of t)s=s.trim(),s&&(G(s)||(V(s)||Z(s))&&n.push(s));return n}function G(e){return[/^[A-Z][a-z\s]+(?:Developer|Manager|Analyst|Engineer|Coordinator|Specialist|Consultant|Director|Associate)$/i,/\b(Inc\.|Corp\.|Ltd\.|LLC|Company|Corporation)\b/i,/^\d{4}\s*[-‚Äì]\s*\d{4}|\d{4}\s*[-‚Äì]\s*Present/i,/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i].some(n=>n.test(e))}function V(e){return/^[\s]*[‚Ä¢¬∑\*\-\+]\s/.test(e)}function Z(e){if(e.length<20)return!1;const n=["developed","managed","led","created","implemented","designed","coordinated","analyzed","improved","optimized"].some(i=>e.toLowerCase().includes(i)),s=/[a-z].*[.!?]?$/i.test(e)&&e.split(" ").length>=4;return n||s}function U(e){return[/\d+%/,/[\$‚Çπ]\s*\d+/,/\d+\s*(million|thousand|lakhs?|crores?|k|m)\b/i,/\d+\s*(years?|months?|weeks?|days?)\b/i,/\d+\s*(people|members?|employees?|users?|customers?)\b/i,/\d+\s*(projects?|tasks?|features?|products?)\b/i,/\d+\s*(clients?|accounts?|companies?)\b/i,/\d+x\b|\bx\d+/i,/\d+\+/,/\b\d{1,3}(,\d{3})*\b/].some(n=>n.test(e))}function K(e){return e.includes(`
`)&&e.length>100?9:5}function _(e){const t=e.split(" ").length;return t>=200&&t<=800?10:t>100?7:4}function J(e){const n=["experience","education","skills","summary"].filter(s=>e.toLowerCase().includes(s));return Math.min(n.length*2.5,10)}function Q(e){return/‚Ä¢|¬∑|\*|-/.test(e)?8:4}function X(e){return["developer","manager","analyst","engineer","coordinator","specialist"].filter(s=>e.toLowerCase().includes(s)).length>0?8:5}function ee(e){return/inc\.|corp\.|ltd\.|llc|company|corporation/i.test(e)?9:6}function te(e){return/\d{4}|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/i.test(e)?9:4}function ne(e){return["certified","certification","license","credential"].filter(s=>e.toLowerCase().includes(s)).length>0?8:5}function se(e){if(!h)return 5;const t=[];h.buzzwords&&Object.values(h.buzzwords).forEach(s=>{t.push(...s)});const n=t.filter(s=>e.toLowerCase().includes(s.toLowerCase()));return Math.min(n.length,10)}function ie(e){return e.length>200&&/\n/.test(e)?8:5}function ae(e){return e.includes(`

`)||e.includes(`
`)?9:6}function oe(e){if(!x)return;const n=P(e).reduce((a,o)=>a+o.score,0),s=Math.round(n/210*100);let i=s;console.log(`Calculated overall score from 21 categories: ${s} (sum: ${n}/210)`),console.log(`Using ATS score: ${i}`),x.textContent=Math.round(i),g&&(i>=80?g.style.borderColor="#10b981":i>=60?g.style.borderColor="#f59e0b":g.style.borderColor="#ef4444")}function re(e){if(!w||!S)return;console.log("üîç displaySidebarCategories called with data:",e),w.innerHTML="",S.innerHTML="";const t=P(e),n=t.filter(a=>a.score<6),s=t.filter(a=>a.score>=6&&a.score<9),i=t.filter(a=>a.score>=9);console.log("üîç High Priority (<6):",n.length,n),console.log("üîç Need Fixes (6-8):",s.length,s),console.log("üîç Completed (9-10):",i.length,i),console.log("üîç Total categories:",t.length),n.forEach(a=>{const o=document.createElement("div");o.className="sidebar-item",o.innerHTML=`
            <span class="text-sm text-gray-700">${a.name}</span>
            <span class="text-sm font-bold text-red-600">${a.score}/10</span>
        `,w.appendChild(o),b.push({title:a.name,description:a.issue,score:a.score,category:"High Priority",severity:"high",impact:a.impact})}),s.forEach(a=>{const o=document.createElement("div");o.className="sidebar-item",o.innerHTML=`
            <span class="text-sm text-gray-700">${a.name}</span>
            <span class="text-sm font-bold text-orange-600">${a.score}/10</span>
        `,w.appendChild(o),b.push({title:a.name,description:a.issue,score:a.score,category:"Need Fixes",severity:"medium",impact:a.impact})}),i.forEach(a=>{const o=document.createElement("div");o.className="sidebar-item",o.innerHTML=`
            <span class="text-sm text-gray-700">${a.name}</span>
            <span class="text-sm font-bold text-green-600">${a.score}/10</span>
        `,S.appendChild(o)}),L&&(L.textContent=`${i.length} COMPLETED OF 21`)}function ce(e){let t=10;return le(e)||(t-=2.5),de(e)||(t-=2.5),ue(e)||(t-=2.5),me(e)||(t-=2.5),Math.max(t,0)}function le(e){return[/\b\d{3}[-.\s]?\d{3}[-.\s]?\d{4}\b/g,/\b\(\d{3}\)\s?\d{3}[-.\s]?\d{4}\b/g,/\b\+\d{1,3}[-.\s]?\d{1,14}[-.\s]?\d{1,14}\b/g,/\b\+91[-.\s]?\d{10}\b/g,/\b91[-.\s]?\d{10}\b/g,/\b[6-9]\d{9}\b/g,/\b\d{10,15}\b/g,/\bphone\s*:?\s*[+]?\d/gi,/\bmobile\s*:?\s*[+]?\d/gi,/\bcell\s*:?\s*[+]?\d/gi,/\bcontact\s*:?\s*[+]?\d/gi].some(n=>n.test(e))}function de(e){return/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g.test(e)}function ue(e){e.toLowerCase();const t=[/linkedin\.com\/in\/[a-z0-9-]+/gi,/linkedin\.com\/pub\/[a-z0-9-]+/gi,/www\.linkedin\.com/gi,/linkedin:\s*[a-z0-9.-]+/gi,/\blinkedin\b.*profile/gi,/profile/gi];return/\blinkedin\b/gi.test(e)?!0:t.some(n=>n.test(e))}function me(e){const t=e.toLowerCase(),n=["mumbai","delhi","new delhi","bangalore","bengaluru","hyderabad","chennai","kolkata","calcutta","pune","gurugram","gurgaon","noida","ahmedabad","surat","jaipur","lucknow","kanpur","nagpur","indore","thane","bhopal","visakhapatnam","vishakhapatnam","pimpri","patna","vadodara","coimbatore","ludhiana","agra","nashik","faridabad","meerut","rajkot","varanasi","banaras","srinagar","aurangabad","dhanbad","amritsar","navi mumbai","allahabad","prayagraj","ranchi","howrah","jabalpur","gwalior","vijayawada","mysore","hubli","mangalore","solapur","kota","trivandrum","thiruvananthapuram","kochi","ernakulam","madurai","salem","tiruchirappalli","trichy","bhubaneswar","cuttack","guwahati","shimla","dehradun","gangtok","itanagar","aizawl","kohima","imphal","agartala","panaji","porvorim","silchar","dibrugarh","tezpur","durgapur","asansol","siliguri","india","haryana","uttar pradesh","maharashtra","karnataka","tamil nadu","telangana","andhra pradesh","gujarat","west bengal","punjab","rajasthan","bihar","jharkhand","kerala","odisha","uttarakhand","chhattisgarh","assam","goa","sikkim","mizoram","tripura","nagaland","manipur","arunachal pradesh","meghalaya","himachal pradesh","california","new york","texas","florida","illinois","pennsylvania","ohio","georgia","north carolina","michigan","new jersey","virginia","washington","arizona","massachusetts","tennessee","indiana","missouri","maryland","wisconsin","colorado","minnesota","south carolina","alabama","louisiana","kentucky","oregon","oklahoma","connecticut","utah","iowa","nevada","arkansas","mississippi","kansas","new mexico","nebraska","west virginia","montana","idaho","hawaii","alaska","maine","new hampshire","vermont","rhode island","delaware","district of columbia","los angeles","san francisco","san diego","san jose","sacramento","fresno","oakland","new york city","nyc","buffalo","rochester","houston","dallas","austin","san antonio","fort worth","miami","orlando","tampa","jacksonville","atlanta","charlotte","raleigh","detroit","grand rapids","chicago","philadelphia","pittsburgh","cleveland","columbus","cincinnati","phoenix","boston","nashville","memphis","indianapolis","st louis","baltimore","milwaukee","denver","minneapolis","seattle","portland","las vegas","salt lake city","honolulu","ontario","quebec","british columbia","alberta","manitoba","saskatchewan","nova scotia","new brunswick","newfoundland and labrador","prince edward island","toronto","vancouver","montreal","ottawa","calgary","edmonton","winnipeg","halifax","victoria","london","manchester","birmingham","liverpool","glasgow","edinburgh","leeds","sheffield","bristol","cardiff","belfast","new south wales","victoria","queensland","south australia","western australia","tasmania","northern territory","australian capital territory","sydney","melbourne","brisbane","perth","adelaide","canberra","hobart","darwin","gold coast","dubai","abu dhabi","doha","riyadh","jeddah","amman","muscat","kuwait city","manama","berlin","munich","hamburg","frankfurt","stuttgart","paris","lyon","marseille","nice","toulouse","amsterdam","rotterdam","the hague","utrecht","zurich","geneva","basel","vienna","budapest","helsinki","stockholm","copenhagen","madrid","barcelona","valencia","seville","lisbon","porto","rome","milan","florence","naples","turin","venice","tokyo","osaka","kyoto","yokohama","nagoya","hong kong","shanghai","beijing","guangzhou","shenzhen","singapore","kuala lumpur","bangkok","jakarta","manila","seoul","busan","incheon","mexico city","guadalajara","monterrey","bogota","lima","santiago","buenos aires","cape town","johannesburg","nairobi","lagos","cairo","casablanca","accra","addis ababa"],s=[/\b\w+,\s*[A-Z]{2,3}\b/g,/\b\w+,\s*\w+\s*\d{5,6}\b/g,/\b\d{5,6}(-\d{4})?\b/g,/location\s*:?\s*\w+/gi,/address\s*:?\s*\w+/gi,/based\s+in\s+\w+/gi,/located\s+in\s+\w+/gi,/\bcity\s*:?\s*\w+/gi,/\bstate\s*:?\s*\w+/gi,/\bcurrent\s+location\s*:?\s*\w+/gi],i=n.some(o=>new RegExp(`\\b${o}\\b`,"i").test(t)),a=s.some(o=>o.test(e));return i||a}function he(e,t){let n=0;const s=e.toLowerCase(),i=Ae(e);return(s.includes("education")||s.includes("academic")||s.includes("qualification"))&&(n+=3),["bachelor","master","phd","doctorate","associate","diploma","certificate","degree","b.s.","b.a.","m.s.","m.a.","mba","ph.d."].some(C=>s.includes(C))&&(n+=3),pe(e)&&(n+=2),ge(e)&&(n+=2),i<3&&(fe(e)||(n-=2)),Math.max(Math.min(n,10),0)}function pe(e){const t=["university","college","institute","school","academy","tech","polytechnic","community college"],n=e.toLowerCase();return t.some(s=>n.includes(s))}function ge(e){return[/\b(19|20)\d{2}\b/g,/\d{1,2}\/\d{4}/g,/[A-Za-z]+\s+\d{4}/g,/\d{4}\s*[-‚Äì]\s*\d{4}/g].some(n=>n.test(e))}function fe(e){const t=e.toLowerCase(),n=[/gpa\s*:?\s*\d\.\d/gi,/\d\.\d{1,2}\s*gpa/gi,/\d\.\d{1,2}\/4\.0/gi],s=["magna cum laude","summa cum laude","cum laude","honors","dean's list","honor roll","distinction","academic excellence","merit","scholarship"],i=n.some(o=>o.test(e)),a=s.some(o=>t.includes(o));return i||a}function be(e){return ye(e).then(t=>{Ge(t)}),Ye(e)}async function ye(e){try{const i=await fetch("/api/grammar-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,check_type:"grammar"})});if(i.ok){const a=await i.json();return Math.max(Math.min(a.grammar_score||8,10),0)}}catch(i){console.warn("LLM grammar check failed, using fallback:",i)}let t=0;const n=[/\bis\s+are\b/gi,/\bare\s+is\b/gi,/\bi\s+are\b/gi,/\byou\s+is\b/gi];let s=0;return n.forEach(i=>{s+=(e.match(i)||[]).length}),e.length>100?t=8:e.length>50?t=6:t=4,t-=Math.min(s*2,6),Math.max(t,0)}function ve(e){let t=0;const n=we(e),s=n.content||"",i=n.hasHeading||!1;if(console.log("Summary Section Analysis:",{summaryLength:s.length,hasHeading:i,summaryPreview:s.substring(0,300)+"...",originalPreview:n.content?n.content.substring(0,100):"No original content"}),!s||s.length<20)return 1;t=10;const a=E(s)||E(e);a||(t-=2);const o=xe(s);o||(t-=2);const r=ke(s);r||(t-=2);const l=Ce(s);l||(t-=2);const d=Se(s)||ze(s);return d||(t-=2),i||(t-=1),console.log("Summary scoring breakdown:",{hasExperience:a,hasSkills:o,hasBuzzWords:r,hasQuantification:l,isBrief:d,hasHeading:i,totalScore:Math.max(t,0)}),Math.max(t,0)}function we(e){const t=e.toLowerCase(),n=e.split(`
`).map(c=>c.trim()).filter(c=>c.length>0),s=["professional summary","executive summary","career summary","summary","objective","profile","overview","about","introduction"];let i=-1,a="";for(const c of s){const u=t.indexOf(c);u!==-1&&(i===-1||u<i)&&(i=u,a=c)}if(i!==-1){const c=e.substring(i),u=["experience","work history","employment","education","skills","technical skills","core competencies"];let y=c.length;for(const j of u){const v=c.toLowerCase().indexOf(j);v!==-1&&v<y&&v>a.length+10&&(y=v)}let f=c.substring(a.length,y).trim();return f=A(f),{content:f,hasHeading:!0}}let o=0;const r=[/^[A-Z][a-z]+ [A-Z][a-z]+/,/@/,/\b\d{3}[-.\s]?\d{3}[-.\s]?\d{4}\b/,/\b[A-Z]{2}\b|\bcity\b|\bstate\b/,/linkedin/i,/github/i];for(let c=0;c<Math.min(n.length,10);c++){const u=n[c];if(!r.some(f=>f.test(u))&&u.length>30){o=c;break}}const l=[];for(let c=o;c<Math.min(o+8,n.length);c++){const u=n[c];if(["experience","work history","employment","education","skills","projects","certifications"].some(f=>u.toLowerCase().includes(f))&&u.length<50||(u.length>20&&!u.match(/^[A-Z\s]{2,}$/)&&l.push(u),l.length>=2&&(u.length<10||u.match(/^[A-Z\s]{2,}$/))))break}const d=l.join(" ").trim();if(d.length>50)return{content:A(d),hasHeading:!1};const $=e.split(`

`).filter(c=>c.trim().length>50)[0]||"";return{content:A($),hasHeading:!1}}function A(e){if(!e)return"";let t=e;return t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/([a-zA-Z])(\d)/g,"$1 $2"),t=t.replace(/(\d)([a-zA-Z])/g,(s,i,a)=>e.includes(i+"+")?s:i+" "+a),["and","of","in","to","with","for","the","as","at","by","on","or"].forEach(s=>{const i=new RegExp(`([a-z])${s}\\b`,"gi");t=t.replace(i,`$1 ${s}`);const a=new RegExp(`\\b${s}([a-z])`,"gi");t=t.replace(a,`${s} $1`)}),t=t.replace(/([a-z])([,.;:])/gi,"$1$2 "),t=t.replace(/([,.;:])([a-zA-Z])/g,"$1 $2"),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\be - commerce\b/gi,"e-commerce"),t=t.replace(/\bed - tech\b/gi,"ed-tech"),t=t.replace(/\bA R R\b/gi,"ARR"),t=t.replace(/\bR O I\b/gi,"ROI"),t=t.replace(/\bA I\b/gi,"AI"),t=t.replace(/\bM L\b/gi,"ML"),t=t.replace(/\bC P O\b/gi,"CPO"),t}function E(e){return[/(\d+)\+?\s*years?\s*(of\s*)?(experience|exp)/gi,/over\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/more than\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/(\d+)\+?\s*year\s*(experienced|professional)/gi,/(experienced|seasoned|veteran)\s*(professional|expert|leader)/gi,/\b(\d+)\+?\s*years?\b/gi,/(senior|lead|principal|staff)\s*(engineer|developer|manager|leader)/gi,/(accomplished|proven|established)\s*(professional|leader|expert)/gi].some(n=>n.test(e))}function xe(e){if(!h)return console.warn("Skills-buzzwords config not loaded, using fallback analysis"),["skill","experience","expertise","proficient","knowledge","ability","capable"].some(a=>e.toLowerCase().includes(a));const t=[...h.technicalSkills||[],...h.professionalSkills||[],...h.industryTerms||[]],n=e.toLowerCase(),s=t.filter(i=>n.includes(i.toLowerCase()));return console.log("Skills analysis (from config):",s),s.length>=1}function ke(e){if(!h)return console.warn("Skills-buzzwords config not loaded, using fallback analysis"),["drive","deliver","optimize","transform","innovate","scale","growth","efficiency"].some(a=>e.toLowerCase().includes(a));const t=[];h.buzzwords&&Object.values(h.buzzwords).forEach(i=>{t.push(...i)});const n=e.toLowerCase(),s=t.filter(i=>n.includes(i.toLowerCase()));return console.log("Buzzwords analysis (from config):",s),s.length>=2}function Ce(e){return[/\b\d+\.?\d*\s*%/g,/\$[\d,]+\.?\d*[kmb]?/gi,/\b\d{2,}[,\d]*\s*(users?|customers?|clients?|people|projects?|systems?|applications?)\b/gi,/\b(\d+x|doubled?|tripled?)\b/gi,/\b(over|more than|up to|above|exceeding?)\s*\d{2,}/gi,/\b\d+\s*(years?|months?)\s*(of\s*)?(experience|exp)/gi].some(n=>n.test(e))}function Se(e){const t=e.trim().split(/\s+/).length,n=e.split(/[.!?]+/).filter(s=>s.trim().length>5).length;return n>=2&&n<=4&&t>=50&&t<=150}function ze(e){const t=e.trim().split(/\s+/).length,n=e.split(/[.!?]+/).filter(s=>s.trim().length>5).length;return n>=1&&n<=6&&t>=30&&t<=300}function Ae(e){const t=e.toLowerCase(),n=[/(\d+)\+?\s*years?\s*(of\s*)?(experience|exp)/gi,/over\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi,/more than\s*(\d+)\s*years?\s*(of\s*)?(experience|exp)/gi];for(const a of n){const o=t.match(a);if(o){const r=o[0].match(/\d+/);if(r)return parseInt(r[0])}}const s=new Date().getFullYear(),i=e.match(/\b(19|20)\d{2}\b/g);if(i&&i.length>=2){const a=i.map(l=>parseInt(l)).sort(),o=a[0];if(a[a.length-1]>=s-1)return Math.min(s-o,20)}return e.length>2e3?8:e.length>1500?5:3}function Le(e){if(!p)return;p.innerHTML="";const t=b.filter(s=>s.score&&s.score<9);if(t.length===0){p.innerHTML=`
            <div class="text-center py-8">
                <div class="text-6xl mb-4">üéâ</div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Perfect ATS Score!</h3>
                <p class="text-gray-600">All categories are optimized. Your resume is ready!</p>
            </div>
        `;return}t.forEach((s,i)=>{const a=document.createElement("div");a.className=`issue-card severity-${s.severity}`;const o=s.score>=8?"text-yellow-600":s.score>=6?"text-orange-600":"text-red-600";a.innerHTML=`
            <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                    <h3 class="text-lg font-semibold text-gray-900">${s.title}</h3>
                    <div class="text-sm font-bold ${o}">${s.score}/10</div>
                </div>
                <p class="text-gray-600 mb-3">${s.description}</p>
                <div class="flex items-center justify-between">
                    <div class="impact-badge">
                        ${Me(s.impact)} ${Pe(s.impact)}
                    </div>
                    <div class="text-xs text-gray-500">
                        ${$e(s.severity)}
                    </div>
                </div>
            </div>
            <button class="fix-button" onclick="handleFixIssue('${s.title}', ${i})">
                FIX ‚Üí
            </button>
        `,p.appendChild(a)});const n=document.createElement("div");n.className="bg-blue-50 border border-blue-200 rounded-12 p-6 mb-6",n.innerHTML=`
        <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-4">
                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <div>
                <h3 class="text-lg font-semibold text-gray-900">ATS Analysis Summary</h3>
                <p class="text-sm text-gray-600">${t.length} areas need improvement out of 21 categories analyzed</p>
            </div>
        </div>
        <div class="grid grid-cols-3 gap-4 text-center">
            <div>
                <div class="text-2xl font-bold text-red-600">${b.filter(s=>s.score<6).length}</div>
                <div class="text-xs text-gray-600 uppercase">High Priority</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-yellow-600">${b.filter(s=>s.score>=6&&s.score<=8).length}</div>
                <div class="text-xs text-gray-600 uppercase">Need Fixes</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-green-600">${b.filter(s=>s.score>=9).length}</div>
                <div class="text-xs text-gray-600 uppercase">Completed</div>
            </div>
        </div>
    `,p.insertBefore(n,p.firstChild)}function Ee(e){if(!z||!O)return;z.innerHTML="",[{title:"Contact Information",description:"Complete contact details with professional email and phone number."},{title:"Professional Format",description:"Clean, ATS-friendly format that scans well across different systems."},{title:"Education Section",description:"Well-structured education section with clear degree and institution details."},{title:"File Structure",description:"PDF format ensures consistent formatting across different devices and systems."},{title:"Length Optimization",description:"Appropriate resume length that provides sufficient detail without being too lengthy."},{title:"Grammar Quality",description:"Professional language with proper grammar and sentence structure."}].forEach(n=>{const s=document.createElement("div");s.className="strength-item",s.innerHTML=`
            <div class="check-icon">
                <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <div class="flex-1">
                <h4 class="font-semibold text-gray-900">${n.title}</h4>
                <p class="text-gray-600 mt-1">${n.description}</p>
            </div>`,z.appendChild(s)})}function Ie(e){const t=e.nextElementSibling,n=e.querySelector("svg"),s=e.querySelector("span");if(t.classList.contains("hidden")){t.classList.remove("hidden"),n.style.transform="rotate(180deg)";const i=t.querySelectorAll(".strength-item").length;s.textContent=`Hide ${i} additional categories`,setTimeout(()=>{const a=document.getElementById("upgradeBtn");a&&a.scrollIntoView({behavior:"smooth",block:"end"})},300)}else{t.classList.add("hidden"),n.style.transform="rotate(0deg)";const i=t.querySelectorAll(".strength-item").length;s.textContent=`Show ${i} more completed categories`}}window.toggleAdditionalStrengths=Ie;function Me(e){return{BREVITY:"üìù",IMPACT:"‚ö°",SECTIONS:"üìã",STYLE:"üé®",ALL:"üéØ"}[e]||"üìå"}function Pe(e){return e||"ALL"}function $e(e){return{high:"High Priority",medium:"Medium Priority",low:"Low Priority"}[e]||"Medium Priority"}window.handleFixIssue=function(e,t){console.log(`Fix requested for: ${e}`);const n=je(e,m);qe(e,n)};function je(e,t){const n=t.insights||{},s=t.resume_text||t.text||"";return Oe(e,n,s)}function Oe(e,t,n){const s=[],i=t.quick_wins||[],a=t.critical_issues||[],o=t.improvement_suggestions||[],r=[...i,...a,...o],l=Re(e,r);if(l.length>0)l.forEach(d=>{s.push({line:Fe(d,n),issue:d.title||d.issue||d.suggestion||"Issue needs attention",fix:d.recommendation||d.solution||`Improved version addressing: ${d.issue||d.suggestion}`,fromAnalysis:!0})});else{const d=Te(e,n);s.push(...d)}return s.slice(0,3)}function Re(e,t,n){const s=Be(e);return t.filter(i=>{const a=(i.title||i.issue||i.suggestion||"").toLowerCase();return s.some(o=>a.includes(o))})}function Be(e){return{summary:["summary","objective","profile","overview"],"quantity impact":["quantify","metric","number","percentage","result","achievement"],"weak verbs":["verb","action","responsible","duties","passive"],verbosity:["concise","wordy","lengthy","verbose","brief"],"spelling & consistency":["spelling","typo","error","consistent","mistake"],grammar:["grammar","tense","sentence","structure"],"active voice":["active","passive","voice"],"verb tenses":["tense","past","present","consistent"],"education section":["education","degree","university","school"],"skills section":["skills","technical","competencies"],"contact details":["contact","phone","email","address"],"use of bullets":["bullet","format","list","structure"]}[e.toLowerCase()]||[e.toLowerCase()]}function Fe(e,t){if(!t)return"Content from your resume that needs attention";const n=t.split(`
`).filter(i=>i.trim().length>10),s=(e.title||e.issue||"").toLowerCase().split(" ");for(let i of n){const a=i.toLowerCase().split(" ");if(s.filter(r=>a.some(l=>l.includes(r)&&r.length>3)).length>0)return i.trim()}return He(e,n)}function He(e,t){var s;const n=(e.title||e.issue||"").toLowerCase();for(let i of t)if(n.includes("verb")&&(i.includes("responsible for")||i.includes("duties include"))||n.includes("quantify")&&(i.includes("improved")||i.includes("increased"))&&!i.match(/\d+/)||n.includes("summary")&&(i.includes("seeking")||i.includes("professional")))return i.trim();return((s=t.find(i=>i.length>30))==null?void 0:s.trim())||"Sample content from your resume"}function Te(e,t){if(!t||t.length<50)return[{line:"Resume content needs enhancement",issue:`${e} section requires improvement for ATS optimization`,fix:"Enhance this section with more relevant content and keywords"}];const n=t.split(`
`).filter(i=>i.trim().length>15),s=[];return n.forEach(i=>{if(s.length>=2)return;const a=De(i,e);a&&s.push(a)}),s.length===0&&s.push({line:n[0]||"Resume content",issue:`${e} optimization needed for better ATS performance`,fix:"Professional optimization will improve this section for ATS systems"}),s}function De(e,t){const n=t.toLowerCase();return n.includes("verb")&&(e.toLowerCase().includes("responsible for")||e.toLowerCase().includes("duties include"))?{line:e.trim(),issue:"Uses weak passive language instead of strong action verbs",fix:"Replace with specific action verbs showing leadership and results"}:n.includes("quantify")&&(e.includes("improved")||e.includes("increased"))&&!e.match(/\d+/)?{line:e.trim(),issue:"Claims improvement without specific metrics or numbers",fix:"Add quantified results with percentages, dollar amounts, or specific numbers"}:n.includes("spelling")&&e.length>50?{line:e.trim(),issue:"May contain spelling or consistency issues requiring review",fix:"Professional review will identify and correct any errors"}:null}function qe(e,t){const n=document.createElement("div");n.className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",n.id="issueDetailModal",n.innerHTML=`
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-xl font-bold text-gray-900">Fix: ${e}</h2>
                <button onclick="closeIssueModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="p-6">
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Specific Issues Found in Your Resume:</h3>
                    <p class="text-gray-600">Here are examples of areas that need improvement for better ATS optimization:</p>
                </div>
                
                ${t.map((s,i)=>`
                    <div class="mb-8 border border-gray-200 rounded-lg overflow-hidden">
                        <div class="bg-red-50 p-4 border-b border-gray-200">
                            <h4 class="font-semibold text-red-800 mb-2">‚ùå Current (Problematic):</h4>
                            <div class="bg-white p-3 rounded border-l-4 border-red-500">
                                <code class="text-sm text-gray-800">"${s.line}"</code>
                            </div>
                            <p class="text-sm text-red-700 mt-2"><strong>Issue:</strong> ${s.issue}</p>
                        </div>
                        
                        <div class="bg-green-50 p-4">
                            <h4 class="font-semibold text-green-800 mb-2">‚úÖ Improved (ATS-Optimized):</h4>
                            <div class="bg-white p-3 rounded border-l-4 border-green-500">
                                <code class="text-sm text-gray-800">"${s.fix}"</code>
                            </div>
                        </div>
                    </div>
                `).join("")}
                
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8">
                    <h4 class="font-semibold text-blue-800 mb-3">üí° Why This Matters for ATS:</h4>
                    <p class="text-blue-700 text-sm">
                        ${Ne(e)}
                    </p>
                </div>
                
                <div class="flex gap-4 mt-8">
                    <button onclick="closeIssueModal()" class="flex-1 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg font-medium hover:bg-gray-300">
                        I'll Fix This Manually
                    </button>
                    <button onclick="handleAutoFix('${e}')" class="flex-1 bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700">
                        üöÄ Auto-Fix with AI - FREE
                    </button>
                </div>
            </div>
        </div>
    `,document.body.appendChild(n)}function Ne(e){return{summary:"ATS systems scan for specific keywords and value propositions in the summary. Generic statements reduce your ranking compared to candidates with targeted, quantified summaries.","quantity impact":"ATS algorithms favor resumes with quantified achievements. Numbers and metrics demonstrate measurable impact and help you stand out in automated screening.","weak verbs":'Strong action verbs signal leadership and initiative to ATS systems. Weak verbs like "responsible for" are passive and reduce the impact score of your accomplishments.',verbosity:"ATS systems may truncate overly long descriptions, causing important information to be missed. Concise, impactful statements ensure all your achievements are captured.","spelling & consistency":"ATS systems flag spelling errors as quality indicators. Even minor mistakes can significantly impact your overall ATS score and prevent you from reaching human reviewers.","active voice":"ATS systems favor active voice as it demonstrates ownership and leadership. Passive voice can make your achievements seem less impactful and reduce keyword matching.","verb tenses":"Consistent verb tenses help ATS systems understand your career timeline. Inconsistent tenses can confuse parsing algorithms and misrepresent your experience."}[e.toLowerCase()]||"Optimizing this area will improve your ATS score and increase your chances of passing automated screening systems used by most companies."}window.closeIssueModal=function(){const e=document.getElementById("issueDetailModal");e&&e.remove()};window.handleAutoFix=function(e){console.log(`Auto-fix requested for: ${e}`),closeIssueModal(),sessionStorage.setItem("fixIssue",e),sessionStorage.setItem("pendingUpgrade","true"),sessionStorage.setItem("upgradeSource","specific_fix"),k&&k.click()};function We(){k&&k.addEventListener("click",()=>{sessionStorage.setItem("pendingUpgrade","true"),sessionStorage.setItem("upgradeSource","results_page"),window.location.href="./payment.html"})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();async function I(){try{window.ActionVerbs&&await window.ActionVerbs.loadActionVerbs(),console.log("ActionVerbs module loaded, initializing results page")}catch(e){console.warn("Failed to load ActionVerbs, proceeding with fallback analysis:",e)}M()}function Ye(e){let t=0;const n=[/\bis\s+are\b/gi,/\bare\s+is\b/gi,/\bi\s+are\b/gi,/\byou\s+is\b/gi];let s=0;return n.forEach(i=>{s+=(e.match(i)||[]).length}),e.length>100?t=8:e.length>50?t=6:t=4,t-=Math.min(s*2,6),Math.max(t,0)}function Ge(e){document.querySelectorAll('[data-category="Grammar"]').forEach(n=>{const s=n.querySelector(".score");s&&(s.textContent=`${e}/10`,s.className=`score ${e>=8?"text-green-600":e>=6?"text-yellow-600":"text-red-600"}`)}),Ve()}function Ve(){const e=document.querySelectorAll(".score");let t=0,n=0;if(e.forEach(s=>{const i=s.textContent.match(/(\d+)\/10/);i&&(t+=parseInt(i[1]),n++)}),n>0){const s=Math.round(t/n*10),i=document.querySelector("#overall-score");i&&(i.textContent=s)}}window.debugResults={analysisData:()=>m,allIssues:()=>b,reinit:M};
