import{D as a}from"./supabase-BWdB_AVO-v2.js";document.addEventListener("DOMContentLoaded",function(){console.log("Optimization results page loaded"),l(),d()});function l(){try{const t=sessionStorage.getItem("jobAnalysisResult"),e=sessionStorage.getItem("jobInputData");if(t&&e){const n=JSON.parse(t),o=JSON.parse(e);document.getElementById("targetRole").textContent=o.roleTitle||"Not specified",document.getElementById("targetCompany").textContent=o.companyName||"Not specified";const s=n.matching_keywords||[];document.getElementById("keywordCount").textContent=`${s.length}/20`;const i=n.analysis_score||85;document.getElementById("matchScore").textContent=i,console.log("âœ… Job analysis results loaded:",n)}else console.warn("No job analysis data found, using defaults"),document.getElementById("targetRole").textContent="Senior Software Engineer",document.getElementById("targetCompany").textContent="Tech Company Inc"}catch(t){console.error("Error loading job analysis results:",t),document.getElementById("targetRole").textContent="Position from Job Analysis",document.getElementById("targetCompany").textContent="Company from Analysis"}}function d(){const t=document.getElementById("downloadBtn"),e=document.getElementById("optimizeAnotherBtn"),n=document.getElementById("newAnalysisBtn");t&&t.addEventListener("click",function(){a.logActivity(null,"job_optimized_resume_download",{source:"optimization_results",timestamp:new Date().toISOString()}),c("ðŸŽ‰ Your job-optimized resume is ready! (Download functionality will be implemented with CV optimizer API integration)")}),e&&e.addEventListener("click",function(){window.location.href="./job-input.html"}),n&&n.addEventListener("click",function(){sessionStorage.clear(),window.location.href="./index.html"})}function c(t){const e=document.createElement("div");e.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-50",e.innerHTML=`<span class="mr-2">âœ…</span> ${t}`,document.body.appendChild(e),setTimeout(()=>{e.remove()},5e3)}
