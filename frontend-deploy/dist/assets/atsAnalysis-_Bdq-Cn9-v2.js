const c=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",r=c?"https://bestcvbuilder-api.onrender.com/api":"/api",n=`${r}/cv-parser`,l="BUILD-2025-08-04-08:00:00-RENDER-API";console.log("ðŸ”— API Configuration v1.1.0:",{API_BASE_URL:r,CV_PARSER_ENDPOINT:n});console.log("ðŸš¨ CRITICAL: Verify this shows correct URL - should NOT be bestcvbuilder-gamma!");async function a(e,o=null){try{console.log("Starting ATS analysis for file:",e);const t={file_url:e,analysis_type:"ats_score",include_recommendations:!0};o&&(t.user_id=o,console.log("Including user_id for database saving:",o));const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`API request failed: ${s.status}`);const i=await s.json();return console.log("ATS analysis completed:",i),m(i)}catch(t){throw console.error("ATS analysis failed:",t),t}}function m(e){return{score:e.ats_score||0,scoreCategory:u(e.ats_score),strengths:e.strengths||[],improvements:e.improvements||[],detailedAnalysis:e.detailed_analysis||"",keywords:e.keywords||[],missingKeywords:e.missing_keywords||[],formattingIssues:e.formatting_issues||[],suggestions:e.suggestions||[],timestamp:new Date().toISOString()}}function u(e){return e>=90?"excellent":e>=80?"good":e>=70?"fair":e>=60?"poor":"very_poor"}function g(e){return{excellent:"Your resume is highly optimized for ATS systems!",good:"Your resume performs well with ATS systems.",fair:"Your resume has room for improvement with ATS systems.",poor:"Your resume needs significant optimization for ATS systems.",very_poor:"Your resume requires major improvements for ATS compatibility."}[e]||"Score analysis unavailable."}function p(e){const o=[];return e.missingKeywords&&e.missingKeywords.length>0&&o.push({type:"keywords",title:"Add Missing Keywords",description:`Consider adding these industry-specific keywords: ${e.missingKeywords.join(", ")}`,priority:"high"}),e.formattingIssues&&e.formattingIssues.length>0&&o.push({type:"formatting",title:"Fix Formatting Issues",description:e.formattingIssues.join(", "),priority:"medium"}),e.suggestions&&e.suggestions.length>0&&e.suggestions.forEach(t=>{o.push({type:"content",title:t.title||"Content Improvement",description:t.description,priority:t.priority||"medium"})}),o}function d(e){const o=e.score;if(e.potential_improvement)return e.potential_improvement;let t;return o>=90?t=5:o>=80?t=10:o>=70?t=15:o>=60?t=20:t=25,t}const f=async(e,o=null)=>a(e,o);export{r as A,l as B,n as C,f as a,g as b,d as c,p as g};
